<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Packaging Guide | rOpenSci Packages: Development, Maintenance, and Peer Review</title>
  <meta name="description" content="Extended version of the rOpenSci packaging guide." />
  <meta name="generator" content="bookdown  and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Packaging Guide | rOpenSci Packages: Development, Maintenance, and Peer Review" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://ropensci.github.io/dev_guide/" />
  <meta property="og:image" content="http://ropensci.github.io/dev_guide/images/icon_short_color.png" />
  <meta property="og:description" content="Extended version of the rOpenSci packaging guide." />
  <meta name="github-repo" content="ropenscilabs/dev_guide" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Packaging Guide | rOpenSci Packages: Development, Maintenance, and Peer Review" />
  
  <meta name="twitter:description" content="Extended version of the rOpenSci packaging guide." />
  <meta name="twitter:image" content="http://ropensci.github.io/dev_guide/images/icon_short_color.png" />

<meta name="author" content="rOpenSci software review editorial team: Brooke Anderson, Scott Chamberlain, Anna Krystalli, Lincoln Mullen, Karthik Ram, Noam Ross, Maëlle Salmon, Melina Vidoni" />


<meta name="date" content="2019-03-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html">
<link rel="next" href="ci.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">rOpenSci Packages: Development, Maintenance, and Peer Review</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="part"><span><b>I Building Your Package</b></span></li>
<li class="chapter" data-level="1" data-path="building.html"><a href="building.html"><i class="fa fa-check"></i><b>1</b> Packaging Guide</a><ul>
<li class="chapter" data-level="1.1" data-path="building.html"><a href="building.html#package-name-and-metadata"><i class="fa fa-check"></i><b>1.1</b> Package name and metadata</a><ul>
<li class="chapter" data-level="1.1.1" data-path="building.html"><a href="building.html#naming-your-package"><i class="fa fa-check"></i><b>1.1.1</b> Naming your package</a></li>
<li class="chapter" data-level="1.1.2" data-path="building.html"><a href="building.html#creating-metadata-for-your-package"><i class="fa fa-check"></i><b>1.1.2</b> Creating metadata for your package</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="building.html"><a href="building.html#platforms"><i class="fa fa-check"></i><b>1.2</b> Platforms</a></li>
<li class="chapter" data-level="1.3" data-path="building.html"><a href="building.html#package-api"><i class="fa fa-check"></i><b>1.3</b> Package API</a></li>
<li class="chapter" data-level="1.4" data-path="building.html"><a href="building.html#function-and-argument-naming"><i class="fa fa-check"></i><b>1.4</b> Function and argument naming</a><ul>
<li class="chapter" data-level="1.4.1" data-path="building.html"><a href="building.html#console-messages"><i class="fa fa-check"></i><b>1.4.1</b> Console messages</a></li>
<li class="chapter" data-level="1.4.2" data-path="building.html"><a href="building.html#interactivegraphical-interfaces"><i class="fa fa-check"></i><b>1.4.2</b> Interactive/Graphical Interfaces</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="building.html"><a href="building.html#code-style"><i class="fa fa-check"></i><b>1.5</b> Code Style</a></li>
<li class="chapter" data-level="1.6" data-path="building.html"><a href="building.html#readme"><i class="fa fa-check"></i><b>1.6</b> README</a></li>
<li class="chapter" data-level="1.7" data-path="building.html"><a href="building.html#documentation"><i class="fa fa-check"></i><b>1.7</b> Documentation</a></li>
<li class="chapter" data-level="1.8" data-path="building.html"><a href="building.html#website"><i class="fa fa-check"></i><b>1.8</b> Documentation website</a><ul>
<li class="chapter" data-level="1.8.1" data-path="building.html"><a href="building.html#function-grouping"><i class="fa fa-check"></i><b>1.8.1</b> Grouping functions in the reference</a></li>
<li class="chapter" data-level="1.8.2" data-path="building.html"><a href="building.html#automatic-deployment-of-the-documentation-website"><i class="fa fa-check"></i><b>1.8.2</b> Automatic deployment of the documentation website</a></li>
<li class="chapter" data-level="1.8.3" data-path="building.html"><a href="building.html#branding-of-authors"><i class="fa fa-check"></i><b>1.8.3</b> Branding of authors</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="building.html"><a href="building.html#authorship"><i class="fa fa-check"></i><b>1.9</b> Authorship</a></li>
<li class="chapter" data-level="1.10" data-path="building.html"><a href="building.html#testing"><i class="fa fa-check"></i><b>1.10</b> Testing</a></li>
<li class="chapter" data-level="1.11" data-path="building.html"><a href="building.html#examples"><i class="fa fa-check"></i><b>1.11</b> Examples</a></li>
<li class="chapter" data-level="1.12" data-path="building.html"><a href="building.html#package-dependencies"><i class="fa fa-check"></i><b>1.12</b> Package dependencies</a></li>
<li class="chapter" data-level="1.13" data-path="building.html"><a href="building.html#recommended-scaffolding"><i class="fa fa-check"></i><b>1.13</b> Recommended scaffolding</a></li>
<li class="chapter" data-level="1.14" data-path="building.html"><a href="building.html#crangotchas"><i class="fa fa-check"></i><b>1.14</b> Miscellaneous CRAN gotchas</a></li>
<li class="chapter" data-level="1.15" data-path="building.html"><a href="building.html#further-guidance"><i class="fa fa-check"></i><b>1.15</b> Further guidance</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ci.html"><a href="ci.html"><i class="fa fa-check"></i><b>2</b> Continuous Integration Best Practices</a><ul>
<li class="chapter" data-level="2.1" data-path="ci.html"><a href="ci.html#why-use-continuous-integration-ci"><i class="fa fa-check"></i><b>2.1</b> Why use continuous integration (CI)?</a></li>
<li class="chapter" data-level="2.2" data-path="ci.html"><a href="ci.html#how-to-use-continuous-integration"><i class="fa fa-check"></i><b>2.2</b> How to use continuous integration?</a></li>
<li class="chapter" data-level="2.3" data-path="ci.html"><a href="ci.html#whichci"><i class="fa fa-check"></i><b>2.3</b> Which continuous integration service(s)?</a><ul>
<li class="chapter" data-level="2.3.1" data-path="ci.html"><a href="ci.html#travis-ci-linux-and-mac-osx"><i class="fa fa-check"></i><b>2.3.1</b> Travis CI (Linux and Mac OSX)</a></li>
<li class="chapter" data-level="2.3.2" data-path="ci.html"><a href="ci.html#appveyor-ci-windows"><i class="fa fa-check"></i><b>2.3.2</b> AppVeyor CI (Windows)</a></li>
<li class="chapter" data-level="2.3.3" data-path="ci.html"><a href="ci.html#circle-ci"><i class="fa fa-check"></i><b>2.3.3</b> Circle CI</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="ci.html"><a href="ci.html#coverage"><i class="fa fa-check"></i><b>2.4</b> Test coverage</a></li>
<li class="chapter" data-level="2.5" data-path="ci.html"><a href="ci.html#even-more-ci-opencpu"><i class="fa fa-check"></i><b>2.5</b> Even more CI: OpenCPU</a></li>
<li class="chapter" data-level="2.6" data-path="ci.html"><a href="ci.html#make-more-of-your-ci-builds-tic"><i class="fa fa-check"></i><b>2.6</b> Make more of your CI builds: tic</a></li>
<li class="chapter" data-level="2.7" data-path="ci.html"><a href="ci.html#make-more-of-your-ci-builds-use-travis-to-deploy-websites"><i class="fa fa-check"></i><b>2.7</b> Make more of your CI builds: Use Travis to deploy websites</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="package-development-security-best-practices.html"><a href="package-development-security-best-practices.html"><i class="fa fa-check"></i><b>3</b> Package Development Security Best Practices</a><ul>
<li class="chapter" data-level="3.1" data-path="package-development-security-best-practices.html"><a href="package-development-security-best-practices.html#misc"><i class="fa fa-check"></i><b>3.1</b> Misc</a></li>
</ul></li>
<li class="part"><span><b>II Software Peer Review of Packages</b></span></li>
<li class="chapter" data-level="4" data-path="softwarereviewintro.html"><a href="softwarereviewintro.html"><i class="fa fa-check"></i><b>4</b> Software Peer Review, Why? What?</a><ul>
<li class="chapter" data-level="4.1" data-path="softwarereviewintro.html"><a href="softwarereviewintro.html#whatissoftwarereview"><i class="fa fa-check"></i><b>4.1</b> What is rOpenSci Software Peer Review?</a></li>
<li class="chapter" data-level="4.2" data-path="softwarereviewintro.html"><a href="softwarereviewintro.html#whysubmit"><i class="fa fa-check"></i><b>4.2</b> Why submit your package to rOpenSci?</a></li>
<li class="chapter" data-level="4.3" data-path="softwarereviewintro.html"><a href="softwarereviewintro.html#whyreview"><i class="fa fa-check"></i><b>4.3</b> Why review packages for rOpenSci?</a></li>
<li class="chapter" data-level="4.4" data-path="softwarereviewintro.html"><a href="softwarereviewintro.html#whyopen"><i class="fa fa-check"></i><b>4.4</b> Why are reviews open?</a></li>
<li class="chapter" data-level="4.5" data-path="softwarereviewintro.html"><a href="softwarereviewintro.html#editors-and-reviewers"><i class="fa fa-check"></i><b>4.5</b> Editors and reviewers</a><ul>
<li class="chapter" data-level="4.5.1" data-path="softwarereviewintro.html"><a href="softwarereviewintro.html#associateditors"><i class="fa fa-check"></i><b>4.5.1</b> Associate editors</a></li>
<li class="chapter" data-level="4.5.2" data-path="softwarereviewintro.html"><a href="softwarereviewintro.html#reviewers"><i class="fa fa-check"></i><b>4.5.2</b> Reviewers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="policies.html"><a href="policies.html"><i class="fa fa-check"></i><b>5</b> Software Peer Review policies</a><ul>
<li class="chapter" data-level="5.1" data-path="policies.html"><a href="policies.html#review-process"><i class="fa fa-check"></i><b>5.1</b> Review process</a><ul>
<li class="chapter" data-level="5.1.1" data-path="policies.html"><a href="policies.html#publishing-in-other-venues"><i class="fa fa-check"></i><b>5.1.1</b> Publishing in other Venues</a></li>
<li class="chapter" data-level="5.1.2" data-path="policies.html"><a href="policies.html#coi"><i class="fa fa-check"></i><b>5.1.2</b> Conflict of interest for reviewers/editors</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="policies.html"><a href="policies.html#aims-and-scope"><i class="fa fa-check"></i><b>5.2</b> Aims and Scope</a><ul>
<li class="chapter" data-level="5.2.1" data-path="policies.html"><a href="policies.html#package-categories"><i class="fa fa-check"></i><b>5.2.1</b> Package categories</a></li>
<li class="chapter" data-level="5.2.2" data-path="policies.html"><a href="policies.html#other-scope-considerations"><i class="fa fa-check"></i><b>5.2.2</b> Other scope considerations</a></li>
<li class="chapter" data-level="5.2.3" data-path="policies.html"><a href="policies.html#overlap"><i class="fa fa-check"></i><b>5.2.3</b> Package overlap</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="policies.html"><a href="policies.html#ownership-after-softwarereview"><i class="fa fa-check"></i><b>5.3</b> Package ownership and maintenance</a><ul>
<li class="chapter" data-level="5.3.1" data-path="policies.html"><a href="policies.html#role-of-the-ropensci-team"><i class="fa fa-check"></i><b>5.3.1</b> Role of the rOpenSci team</a></li>
<li class="chapter" data-level="5.3.2" data-path="policies.html"><a href="policies.html#maintainer-responsiveness"><i class="fa fa-check"></i><b>5.3.2</b> Maintainer responsiveness</a></li>
<li class="chapter" data-level="5.3.3" data-path="policies.html"><a href="policies.html#quality-commitment"><i class="fa fa-check"></i><b>5.3.3</b> Quality commitment</a></li>
<li class="chapter" data-level="5.3.4" data-path="policies.html"><a href="policies.html#package-removal"><i class="fa fa-check"></i><b>5.3.4</b> Package removal</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="policies.html"><a href="policies.html#code-of-conduct"><i class="fa fa-check"></i><b>5.4</b> Code of Conduct</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="guide-for-authors.html"><a href="guide-for-authors.html"><i class="fa fa-check"></i><b>6</b> Guide for Authors</a></li>
<li class="chapter" data-level="7" data-path="reviewerguide.html"><a href="reviewerguide.html"><i class="fa fa-check"></i><b>7</b> Guide for Reviewers</a><ul>
<li class="chapter" data-level="7.1" data-path="reviewerguide.html"><a href="reviewerguide.html#preparing-your-review"><i class="fa fa-check"></i><b>7.1</b> Preparing your review</a><ul>
<li class="chapter" data-level="7.1.1" data-path="reviewerguide.html"><a href="reviewerguide.html#general-guidelines"><i class="fa fa-check"></i><b>7.1.1</b> General guidelines</a></li>
<li class="chapter" data-level="7.1.2" data-path="reviewerguide.html"><a href="reviewerguide.html#experience-from-past-reviewers"><i class="fa fa-check"></i><b>7.1.2</b> Experience from past reviewers</a></li>
<li class="chapter" data-level="7.1.3" data-path="reviewerguide.html"><a href="reviewerguide.html#helper-package-for-reviewers"><i class="fa fa-check"></i><b>7.1.3</b> Helper package for reviewers</a></li>
<li class="chapter" data-level="7.1.4" data-path="reviewerguide.html"><a href="reviewerguide.html#feedback-on-the-process"><i class="fa fa-check"></i><b>7.1.4</b> Feedback on the process</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="reviewerguide.html"><a href="reviewerguide.html#submitreview"><i class="fa fa-check"></i><b>7.2</b> Submitting the Review</a></li>
<li class="chapter" data-level="7.3" data-path="reviewerguide.html"><a href="reviewerguide.html#followupreviewer"><i class="fa fa-check"></i><b>7.3</b> Review follow-up</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="editorguide.html"><a href="editorguide.html"><i class="fa fa-check"></i><b>8</b> Guide for Editors</a><ul>
<li class="chapter" data-level="8.1" data-path="editorguide.html"><a href="editorguide.html#eicchecklist"><i class="fa fa-check"></i><b>8.1</b> EiC Responsibilities</a></li>
<li class="chapter" data-level="8.2" data-path="editorguide.html"><a href="editorguide.html#editorchecklist"><i class="fa fa-check"></i><b>8.2</b> Handling Editor’s Checklist</a><ul>
<li class="chapter" data-level="8.2.1" data-path="editorguide.html"><a href="editorguide.html#upon-submission"><i class="fa fa-check"></i><b>8.2.1</b> Upon submission:</a></li>
<li class="chapter" data-level="8.2.2" data-path="editorguide.html"><a href="editorguide.html#look-for-and-assign-reviewers"><i class="fa fa-check"></i><b>8.2.2</b> Look for and assign reviewers:</a></li>
<li class="chapter" data-level="8.2.3" data-path="editorguide.html"><a href="editorguide.html#during-review"><i class="fa fa-check"></i><b>8.2.3</b> During review:</a></li>
<li class="chapter" data-level="8.2.4" data-path="editorguide.html"><a href="editorguide.html#after-review"><i class="fa fa-check"></i><b>8.2.4</b> After review:</a></li>
<li class="chapter" data-level="8.2.5" data-path="editorguide.html"><a href="editorguide.html#for-joint-joss-submissions"><i class="fa fa-check"></i><b>8.2.5</b> For joint JOSS submissions:</a></li>
<li class="chapter" data-level="8.2.6" data-path="editorguide.html"><a href="editorguide.html#package-promotion"><i class="fa fa-check"></i><b>8.2.6</b> Package promotion:</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="editorguide.html"><a href="editorguide.html#outofscoperesponse"><i class="fa fa-check"></i><b>8.3</b> Responding to out-of-scope submissions</a></li>
</ul></li>
<li class="part"><span><b>III Maintaining Packages</b></span></li>
<li class="chapter" data-level="9" data-path="collaboration.html"><a href="collaboration.html"><i class="fa fa-check"></i><b>9</b> Collaboration Guide</a><ul>
<li class="chapter" data-level="9.1" data-path="collaboration.html"><a href="collaboration.html#friendlyfiles"><i class="fa fa-check"></i><b>9.1</b> Make your repo contribution and collaboration friendly</a><ul>
<li class="chapter" data-level="9.1.1" data-path="collaboration.html"><a href="collaboration.html#code-of-conduct-1"><i class="fa fa-check"></i><b>9.1.1</b> Code of conduct</a></li>
<li class="chapter" data-level="9.1.2" data-path="collaboration.html"><a href="collaboration.html#contributing-guide"><i class="fa fa-check"></i><b>9.1.2</b> Contributing guide</a></li>
<li class="chapter" data-level="9.1.3" data-path="collaboration.html"><a href="collaboration.html#issue-labelling"><i class="fa fa-check"></i><b>9.1.3</b> Issue labelling</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="collaboration.html"><a href="collaboration.html#workingcollaborators"><i class="fa fa-check"></i><b>9.2</b> Working with collaborators</a><ul>
<li class="chapter" data-level="9.2.1" data-path="collaboration.html"><a href="collaboration.html#onboarding-collaborators"><i class="fa fa-check"></i><b>9.2.1</b> Onboarding collaborators</a></li>
<li class="chapter" data-level="9.2.2" data-path="collaboration.html"><a href="collaboration.html#working-with-collaborators-including-yourself"><i class="fa fa-check"></i><b>9.2.2</b> Working with collaborators (including yourself)</a></li>
<li class="chapter" data-level="9.2.3" data-path="collaboration.html"><a href="collaboration.html#attributions"><i class="fa fa-check"></i><b>9.2.3</b> Be generous with attributions</a></li>
<li class="chapter" data-level="9.2.4" data-path="collaboration.html"><a href="collaboration.html#welcoming-collaborators-to-ropensci"><i class="fa fa-check"></i><b>9.2.4</b> Welcoming collaborators to rOpenSci</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="releasing.html"><a href="releasing.html"><i class="fa fa-check"></i><b>10</b> Releasing a package</a><ul>
<li class="chapter" data-level="10.1" data-path="releasing.html"><a href="releasing.html#versioning"><i class="fa fa-check"></i><b>10.1</b> Versioning</a></li>
<li class="chapter" data-level="10.2" data-path="releasing.html"><a href="releasing.html#releasing-1"><i class="fa fa-check"></i><b>10.2</b> Releasing</a></li>
<li class="chapter" data-level="10.3" data-path="releasing.html"><a href="releasing.html#news"><i class="fa fa-check"></i><b>10.3</b> News file</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="marketing.html"><a href="marketing.html"><i class="fa fa-check"></i><b>11</b> Marketing your package</a></li>
<li class="chapter" data-level="12" data-path="grooming.html"><a href="grooming.html"><i class="fa fa-check"></i><b>12</b> GitHub Grooming</a><ul>
<li class="chapter" data-level="12.1" data-path="grooming.html"><a href="grooming.html#repodiscoverability"><i class="fa fa-check"></i><b>12.1</b> Make your repository more discoverable</a><ul>
<li class="chapter" data-level="12.1.1" data-path="grooming.html"><a href="grooming.html#github-repo-topics"><i class="fa fa-check"></i><b>12.1.1</b> GitHub repo topics</a></li>
<li class="chapter" data-level="12.1.2" data-path="grooming.html"><a href="grooming.html#github-linguist"><i class="fa fa-check"></i><b>12.1.2</b> GitHub linguist</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="grooming.html"><a href="grooming.html#marketown"><i class="fa fa-check"></i><b>12.2</b> Market your own account</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="evolution.html"><a href="evolution.html"><i class="fa fa-check"></i><b>13</b> Package evolution - changing stuff in your package</a><ul>
<li class="chapter" data-level="13.1" data-path="evolution.html"><a href="evolution.html#philosophy-of-changes"><i class="fa fa-check"></i><b>13.1</b> Philosophy of changes</a></li>
<li class="chapter" data-level="13.2" data-path="evolution.html"><a href="evolution.html#parameters-changing-parameter-names"><i class="fa fa-check"></i><b>13.2</b> Parameters: changing parameter names</a></li>
<li class="chapter" data-level="13.3" data-path="evolution.html"><a href="evolution.html#functions-changing-function-names"><i class="fa fa-check"></i><b>13.3</b> Functions: changing function names</a></li>
<li class="chapter" data-level="13.4" data-path="evolution.html"><a href="evolution.html#functions-deprecate-defunct"><i class="fa fa-check"></i><b>13.4</b> Functions: deprecate &amp; defunct</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="contributingguide.html"><a href="contributingguide.html"><i class="fa fa-check"></i><b>14</b> Contributing Guide</a><ul>
<li class="chapter" data-level="14.1" data-path="contributingguide.html"><a href="contributingguide.html#why-contributing-to-ropensci-packages"><i class="fa fa-check"></i><b>14.1</b> Why contributing to rOpenSci packages?</a></li>
<li class="chapter" data-level="14.2" data-path="contributingguide.html"><a href="contributingguide.html#non-code-contributions"><i class="fa fa-check"></i><b>14.2</b> Non code contributions</a><ul>
<li class="chapter" data-level="14.2.1" data-path="contributingguide.html"><a href="contributingguide.html#reporting-use-cases"><i class="fa fa-check"></i><b>14.2.1</b> Reporting use cases</a></li>
<li class="chapter" data-level="14.2.2" data-path="contributingguide.html"><a href="contributingguide.html#reporting-issues-or-requesting-features"><i class="fa fa-check"></i><b>14.2.2</b> Reporting issues or Requesting features</a></li>
<li class="chapter" data-level="14.2.3" data-path="contributingguide.html"><a href="contributingguide.html#asking-other-questions"><i class="fa fa-check"></i><b>14.2.3</b> Asking other questions</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="contributingguide.html"><a href="contributingguide.html#code-contributions"><i class="fa fa-check"></i><b>14.3</b> Code contributions</a><ul>
<li class="chapter" data-level="14.3.1" data-path="contributingguide.html"><a href="contributingguide.html#prerequisites-for-package-development"><i class="fa fa-check"></i><b>14.3.1</b> Prerequisites for package development</a></li>
<li class="chapter" data-level="14.3.2" data-path="contributingguide.html"><a href="contributingguide.html#finding-where-to-contribute-code-or-documentation"><i class="fa fa-check"></i><b>14.3.2</b> Finding where to contribute code or documentation</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="booknews.html"><a href="booknews.html"><i class="fa fa-check"></i><b>A</b> NEWS</a><ul>
<li class="chapter" data-level="A.1" data-path="booknews.html"><a href="booknews.html#place-holder-0.0.1"><i class="fa fa-check"></i><b>A.1</b> place-holder 0.0.1</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="reviewtemplate.html"><a href="reviewtemplate.html"><i class="fa fa-check"></i><b>B</b> Review template</a></li>
<li class="chapter" data-level="C" data-path="editortemplate.html"><a href="editortemplate.html"><i class="fa fa-check"></i><b>C</b> Editor’s template</a></li>
<li class="chapter" data-level="D" data-path="reviewrequesttemplate.html"><a href="reviewrequesttemplate.html"><i class="fa fa-check"></i><b>D</b> Review request template</a></li>
<li class="chapter" data-level="E" data-path="approvaltemplate.html"><a href="approvaltemplate.html"><i class="fa fa-check"></i><b>E</b> Approval comment template</a></li>
<li class="chapter" data-level="F" data-path="newstemplate.html"><a href="newstemplate.html"><i class="fa fa-check"></i><b>F</b> NEWS template</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">rOpenSci Packages: Development, Maintenance, and Peer Review</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="building" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Packaging Guide</h1>
<div class="summaryblock">
<p>
rOpenSci accepts packages that meet our guidelines via a streamlined <a href="softwarereviewintro.html#whatissoftwarereview">Software Peer Review process</a>. To ensure a consistent style across all of our tools we have written this chapter highlighting our guidelines for package development. Please also read and apply our <a href="ci.html#ci">chapter about continuous integration (CI)</a>. Further guidance for after the review process is provided in the third section of this book starting with <a href="collaboration.html#collaboration">a chapter about collaboration</a>.
</p>
<p>
We strongly recommend that package developers read Hadley Wickham’s concise but thorough book on package development which is available for <a href="http://r-pkgs.had.co.nz/">free online</a> (and <a href="http://amzn.com/1491910593?tag=r-pkgs-20">print</a>). Our guide is partially redundant with other resources but highlights rOpenSci’s guidelines.
</p>
<p>
To read why submitting a package to rOpenSci is worth the effort to meet guidelines, have a look at <a href="softwarereviewintro.html#whysubmit">reasons to submit</a>.
</p>
</div>
<div id="package-name-and-metadata" class="section level2">
<h2><span class="header-section-number">1.1</span> Package name and metadata</h2>
<div id="naming-your-package" class="section level3">
<h3><span class="header-section-number">1.1.1</span> Naming your package</h3>
<ul>
<li><p>We strongly recommend short, descriptive names in lower case. If your package deals with one or more commercial services, please make sure the name does not violate branding guidelines. You can check if your package name is available, informative and not offensive by using the <a href="https://github.com/ropenscilabs/available"><code>available</code> package</a>. In particular, do <em>not</em> choose a package name that’s already used on CRAN or Bioconductor.</p></li>
<li><p>A more unique package name might be easier to track (for you and us to assess package use) and search (for users to find it and to google their questions). Obviously a <em>too</em> unique package name might make the package less discoverable (e.g. it might be an argument for naming your package <a href="https://github.com/ropensci/geojson">geojson</a>).</p></li>
<li><p>Find other interesting aspects of naming your package <a href="http://www.njtierney.com/post/2018/06/20/naming-things/">in this blog post by Nick Tierney</a>, and in case you change your mind, find out <a href="http://www.njtierney.com/post/2017/10/27/change-pkg-name/">how to rename your package in this other blog post of Nick’s</a>.</p></li>
</ul>
</div>
<div id="creating-metadata-for-your-package" class="section level3">
<h3><span class="header-section-number">1.1.2</span> Creating metadata for your package</h3>
<p>We recommend you to use the <a href="https://github.com/ropensci/codemetar"><code>codemetar</code> package</a> for creating and updating a JSON <a href="https://codemeta.github.io/">CodeMeta</a> metadata file for your package via <code>codemetar::write_codemeta()</code>. It will automatically include all useful information, including <a href="grooming.html#grooming">GitHub topics</a>. CodeMeta uses <a href="https://schema.org/">Schema.org terms</a> so as it gains popularity the JSON metadata of your package might be used by third-party services, maybe even search engines.</p>
</div>
</div>
<div id="platforms" class="section level2">
<h2><span class="header-section-number">1.2</span> Platforms</h2>
<ul>
<li>Packages should run on all major platforms (Windows, macOS, Linux). Exceptions may be granted packages that interact with system-specific functions, or wrappers for utilities that only operate on limited platforms, but authors should make every effort for cross-platform compatibility, including system-specific compilation, or containerization of external utilities.</li>
</ul>
</div>
<div id="package-api" class="section level2">
<h2><span class="header-section-number">1.3</span> Package API</h2>
</div>
<div id="function-and-argument-naming" class="section level2">
<h2><span class="header-section-number">1.4</span> Function and argument naming</h2>
<ul>
<li><p>Functions and arguments naming should be chosen to work together to form a common, logical programming API that is easy to read, and auto-complete.</p>
<ul>
<li>Consider an <code>object_verb()</code> naming scheme for functions in your package that take a common data type or interact with a common API. <code>object</code> refers to the data/API and <code>verb</code> the primary action. This scheme helps avoid namespace conflicts with packages that may have similar verbs, and makes code readable and easy to auto-complete. For instance, in <strong>stringi</strong>, functions starting with <code>stri_</code> manipulate strings (<code>stri_join()</code>, <code>stri_sort()</code>, and in <strong>googlesheets</strong> functions starting with <code>gs_</code> are calls to the Google Sheets API (<code>gs_auth()</code>, <code>gs_user()</code>, <code>gs_download()</code>).</li>
</ul></li>
<li><p>For functions that manipulate an object/data and return an object/data of the same type, make the object/data the first argument of the function so as to enhance compatibility with the pipe operator (<code>%&gt;%</code>)</p></li>
<li><p>We strongly recommend <code>snake_case</code> over all other styles unless you are porting over a package that is already in wide use.</p></li>
<li><p>Avoid function name conflicts with base packages or other popular ones (e.g. <code>ggplot2</code>, <code>dplyr</code>, <code>magrittr</code>, <code>data.table</code>)</p>
<ul>
<li>Argument naming and order should be consistent across functions that use similar inputs.</li>
</ul></li>
<li><p>Package functions importing data should not import data to the global environment, but instead must return objects. Assignments to the global environment are to be avoided in general.</p></li>
</ul>
<div id="console-messages" class="section level3">
<h3><span class="header-section-number">1.4.1</span> Console messages</h3>
<ul>
<li>Use <code>message()</code> and <code>warning()</code> to communicate with the user in your functions. Please do not use <code>print()</code> or <code>cat()</code> unless it’s for a <code>print.*()</code> method, as these methods of printing messages are harder for the user to suppress.</li>
</ul>
</div>
<div id="interactivegraphical-interfaces" class="section level3">
<h3><span class="header-section-number">1.4.2</span> Interactive/Graphical Interfaces</h3>
<p>If providing graphical user interface (GUI) (such as a Shiny app), to facilitate workflow , include a mechanism to automatically reproduce steps taken in the GUI. This could include auto-generation of code to reproduce the same outcomes, output of intermediate values produced in the interactive tool, or simply clear and well-documented mapping between GUI actions and scripted functions. (See also <a href="building.html#testing">“Testing”</a> below.)</p>
<p>The <a href="https://github.com/ropensci/tabulizer"><code>tabulizer</code> package</a> e.g. has an interactive workflow to extract tables, but can also only extract coordinates so one can re-run things as a script. Besides, two examples of shiny apps that do code generation are <a href="https://gdancik.shinyapps.io/shinyGEO/" class="uri">https://gdancik.shinyapps.io/shinyGEO/</a>, and <a href="https://github.com/wallaceEcoMod/wallace/" class="uri">https://github.com/wallaceEcoMod/wallace/</a></p>
</div>
</div>
<div id="code-style" class="section level2">
<h2><span class="header-section-number">1.5</span> Code Style</h2>
<ul>
<li>For more information on how to style your code, name functions, and R scripts inside the <code>R/</code> folder, we recommend reading the <a href="http://r-pkgs.had.co.nz/r.html">code chapter in Hadley’s book</a>. We recommend the <a href="https://github.com/r-lib/styler"><code>styler</code> package</a> for automating part of the code styling.</li>
</ul>
</div>
<div id="readme" class="section level2">
<h2><span class="header-section-number">1.6</span> README</h2>
<ul>
<li><p>All packages should have a README file, named <code>README.md</code>, in the root of the repository. The README should include, from top to bottom:</p>
<ul>
<li>The package name</li>
<li>Badges for continuous integration and test coverage, the badge for rOpenSci peer-review once it has started (see below), a repostatus.org badge, and any other badges. If the README has many more badges, you might want to consider using a table for badges, see <a href="https://github.com/ropensci/ijtiff#ijtiff-">this example</a>, <a href="https://github.com/ropensci/drake">that one</a> and <a href="https://github.com/ropensci/qualtRics/">that one</a>. Such a table shoud be more wide than high.</li>
<li>Short description of goals of package, with descriptive links to all vignettes (rendered, i.e. readable, cf <a href="building.html#website">the documentation website section</a>) unless the package is small and there’s only one vignette repeating the README.</li>
<li>Installation instructions</li>
<li>Any additional setup required (authentication tokens, etc)</li>
<li>Brief demonstration usage</li>
<li>If applicable, how the package compares to other similar packages and/or how it relates to other packages</li>
<li>Citation information</li>
</ul></li>
</ul>
<p>If you use another repo status badge such as a <a href="https://www.tidyverse.org/lifecycle/">lifecycle</a> badge, please also add a <a href="http://www.repostatus.org/">repostatus.org</a> badge. <a href="https://github.com/ropensci/ijtiff#ijtiff-">Example of a repo README with two repo status badges</a>.</p>
<ul>
<li>Once you have submitted a package and it has passed editor checks, add a peer-review badge via</li>
</ul>
<pre><code>[![](https://badges.ropensci.org/&lt;issue_id&gt;_status.svg)](https://github.com/ropensci/software-review/issues/&lt;issue_id&gt;)</code></pre>
<p>where issue_id is the number of the issue in the software-review repository. For instance, the badge for <a href="https://github.com/ropensci/rtimicropem"><code>rtimicropem</code></a> review uses the number 126 since it’s the <a href="https://github.com/ropensci/software-review/issues/126">review issue number</a>. The badge will first indicated “under review” and then “peer-reviewed” once your package has been onboarded (issue labelled “approved” and closed), and will link to the review issue.</p>
<ul>
<li>If your README has many badges consider ordering them in an html table to make it easier for newcomers to gather information at a glance. See examples in <a href="https://github.com/ropensci/drake"><code>drake</code> repo</a> and in <a href="https://github.com/ropensci/qualtRics/"><code>qualtRics</code> repo</a>. Possible sections are
<ul>
<li>Development (CI statuses cf <a href="ci.html#ci">CI chapter</a>, Slack channel for discussion, repostatus)</li>
<li>Release/Published (<a href="https://www.r-pkg.org/services#badges">CRAN version and release date badges from METACRAN</a>, <a href="https://github.com/ropensci/cchecksapi#badges">CRAN checks API badge</a>, Zenodo badge)</li>
<li>Stats/Usage (downloads e.g. <a href="https://www.r-pkg.org/services#badges">download badges from METACRAN</a>)
The table should be more wide than it is long in order to mask the rest of the README.</li>
</ul></li>
<li><p>If your package connects to a data source or online service, or wraps other software, consider that your package README may be the first point of entry for users. It should provide enough information for users to understand the nature of the data, service, or software, and provide links to other relevant data and documentation. For instance,
a README should not merely read, “Provides access to GooberDB,” but also include,
“…, an online repository of Goober sightings in South America. More
information about GooberDB, and documentation of database structure and metadata
can be found at <em>link</em>”.</p></li>
<li><p>We recommend not creating <code>README.md</code> directly, but from a <code>README.Rmd</code> file (an R Markdown file) if you have any demonstration code. The advantage of the <code>.Rmd</code> file is you can combine text with code that can be easily updated whenever your package is updated.</p></li>
<li><p>Extensive examples should be kept for a vignette. If you want to make the vignettes more accessible before installing the package, we suggest <a href="building.html#website">creating a website for your package</a></p></li>
<li><p>Consider using <code>usethis::use_readme_rmd()</code> to get a template for a <code>README.Rmd</code> file and to automatically set up a pre-commit hook to ensure that <code>README.md</code> is always newer than <code>README.Rmd</code>.</p></li>
<li><p><em>After</em> a package is accepted but before transfer, the rOpenSci footer should be added to the bottom of the README file with the following markdown line:</p></li>
</ul>
<pre><code>[![ropensci_footer](http://ropensci.org/public_images/github_footer.png)](https://ropensci.org)</code></pre>
<ul>
<li><p>Add a code of conduct and contribution guidelines, cf <a href="collaboration.html#friendlyfiles">this section of the book</a>.</p></li>
<li><p>See the <a href="https://github.com/ropensci/gistr#gistr"><code>gistr</code> README</a> for a good example README to follow for a small package, and <a href="https://github.com/ropensci/bowerbird"><code>bowerbird</code> README</a> for a good example README for a larger package.</p></li>
</ul>
</div>
<div id="documentation" class="section level2">
<h2><span class="header-section-number">1.7</span> Documentation</h2>
<ul>
<li><p>All exported package functions should be fully documented with examples.</p></li>
<li><p>We request all submissions to use <code>roxygen2</code> for documentation. <code>roxygen2</code> is <a href="http://cran.r-project.org/web/packages/roxygen2/index.html">an R package</a> that automatically compiles <code>.Rd</code> files to your <code>man</code> folder in your package from simple tags written above each function.</p></li>
<li><p>More information on using roxygen2 <a href="http://r-pkgs.had.co.nz/man.html">documentation</a> is available in the R packages book.</p></li>
<li><p>One key advantage of using <code>roxygen2</code> is that your <code>NAMESPACE</code> will always be automatically generated and up to date.</p></li>
<li><p>All functions should document the type of object returned under the <code>@return</code> heading.</p></li>
<li><p>We recommend using the <code>@family</code> tag in the documentation of functions to allow their grouping in the documentation of the installed package and potentially in the package’s website, see <a href="http://r-pkgs.had.co.nz/man.html">this section of Hadley Wickham’s book</a> and <a href="building.html#function-grouping">this section of the present chapter</a> for more details.</p></li>
<li><p>The package should contain top-level documentation for <code>?foobar</code>, (or <code>?`foobar-package`</code> if there is a naming conflict). Optionally, you can use both <code>?foobar</code> and <code>?`foobar-package`</code> for the package level manual file, using <code>@aliases</code> roxygen tag. <code>usethis::use_package_doc()</code> adds the template for the top-level documentation.</p></li>
<li><p>The package should contain at least one vignette providing a substantial coverage of package functions, illustrating realistic use cases and how functions are intended to interact. If the package is small, the vignette and the README can have the same content.</p></li>
<li><p>As is the case for a README, top-level documentation or vignettes may be the first point of entry for users. If your package connects to a data source or online service, or wraps other software, it should provide enough information for users to understand the nature of the data, service, or software, and provide links to other relevant data and documentation. For instance, a vignette intro or documentation should not merely read, “Provides access to GooberDB,” but also include, “…, an online repository of Goober sightings in South America. More information about GooberDB, and documentation of database structure and metadata can be found at <em>link</em>”. Any vignette should outline prerequisite knowledge to be able to understand the vignette upfront.</p></li>
</ul>
<p>The general vignette should present a series of examples progressing in complexity from basic to advanced usage.</p>
<ul>
<li><p>Functionality likely to be used by only more advanced users or developers might be better put in a separate vignette (i.e. programming/NSE with dplyr).</p></li>
<li><p>The vignette(s) should include citations to software and papers where appropriate.</p></li>
<li><p>The README, the top-level package docs, vignettes, websites, etc., should all have enough information at the beginning to get a high-level overview of the package and the services/data it connects to, and provide navigation to other relevant pieces of documentation. This is to follow the principle of <em>multiple points of entry</em> i.e. to take into account the fact that any piece of documentation may be the first encounter the user has with the package and/or the tool/data it wraps.</p></li>
<li><p>Add <code>#' @noRd</code> to internal functions.</p></li>
<li><p>Only use package startup messages when necessary (function masking for instance). Avoid package startup messages like “This is foobar 2.4-0” or citation guidance because they can be annoying to the user. Rely on documentation for such guidance.</p></li>
<li><p>You can choose to have a README section about use cases of your package (other packages, blog posts, etc.), <a href="https://github.com/ropensci/vcr#example-packages-using-vcr">example</a>.</p></li>
<li>If you prefer not to clutter up code with extensive documentation, place further documentation/examples in files in a <code>man-roxygen</code> folder in the root of your package, and those will be combined into the manual file by the use of <code>@template &lt;file name&gt;</code>, for example.
<ul>
<li>Put any documentation for an object in a <code>.R</code> file in the <code>man-roxygen</code> folder (at the root of your package). For example, <a href="https://github.com/ropensci/rgbif/blob/master/man-roxygen/occ_search_egs.R">this file</a>. Link to that template file from your function (<a href="https://github.com/ropensci/rgbif/blob/master/R/occ_search.r">e.g.</a>) with the <code>@template</code> keyword (<a href="https://github.com/ropensci/rgbif/blob/master/R/occ_search.r#L7">e.g.</a>). The contents of the template will be inserted when documentation is built into the resulting <code>.Rd</code> file that users will see when they ask for documentation for the function.</li>
<li>Note that if you are using markdown documentation, markdown currently doesn’t work in template files, so make sure to use latex formatting.</li>
<li>In most cases you can ignore templates and <code>man-roxygen</code>, but there are two cases in which leveraging them will greatly help:
<ol style="list-style-type: decimal">
<li>When you have a lot of documentation for a function/class/object separating out certain chunks of that documentation can keep your <code>.R</code> source file tidy. This is especially useful when you have a lot of code in that <code>.R</code> file.</li>
<li>When you have the same documentation parts used across many <code>.R</code> functions it’s helpful to use a template. This reduces duplicated text, and helps prevent mistakingly updating documentation for one function but not the other.</li>
</ol></li>
</ul></li>
</ul>
</div>
<div id="website" class="section level2">
<h2><span class="header-section-number">1.8</span> Documentation website</h2>
<p>We recommend creating a documentation website for your package using <a href="https://github.com/hadley/pkgdown"><code>pkgdown</code></a>. <a href="http://enpiar.com/2017/11/21/getting-down-with-pkgdown/">Here</a> is a good tutorial to get started with <code>pkgdown</code>, and unsurprisingly <code>pkgdown</code> has a <a href="http://pkgdown.r-lib.org/">its own documentation website</a>.</p>
<p>There are a few tips we’d like to underline here.</p>
<div id="function-grouping" class="section level3">
<h3><span class="header-section-number">1.8.1</span> Grouping functions in the reference</h3>
<p>When your package has many functions, use grouping in the reference, which you can do more or less automatically.</p>
<p>If you use <code>roxygen</code> above version 6.0.1.9000 (as of July 2018, development version to be installed via <code>remotes::install_github(&quot;klutometis/roxygen&quot;)</code>) you should use the <code>@family</code> tag in your functions documentation to indicate grouping. This will give you links between functions in the local documentation of the installed package (“See also” section) <em>and</em> allow you to use the <code>pkgdown</code> <code>has_concept</code> function in the config file of your website. Non-rOpenSci example courtesy of <a href="https://github.com/lockedata/optiRum"><code>optiRum</code></a>: <a href="https://github.com/lockedata/optiRum/blob/master/R/APR.R#L17">family tag</a>, <a href="https://github.com/lockedata/optiRum/blob/master/_pkgdown.yml"><code>pkgdown</code> config file</a> and <a href="https://itsalocke.com/optirum/reference/">resulting reference section</a>.</p>
<p>Less automatically, see the example of <a href="https://ropensci.github.io/drake/reference/index.html"><code>drake</code> website</a> and <a href="https://github.com/ropensci/drake/blob/master/_pkgdown.yml">associated config file</a>.</p>
</div>
<div id="automatic-deployment-of-the-documentation-website" class="section level3">
<h3><span class="header-section-number">1.8.2</span> Automatic deployment of the documentation website</h3>
<p>You could use the <a href="https://github.com/ropenscilabs/tic"><code>tic</code> package</a> for automatic deployment of the package’s website, see <a href="https://github.com/krlmlr/tic.package">this example repo</a>. This would save you the hassle of running (and remembering to run) <code>pkgdown::build_site()</code> yourself every time the site needs to be updated. First refer to our <a href="ci.html#ci">chapter on continuous integration</a> if you’re not familiar with continuous integration/Travis.</p>
</div>
<div id="branding-of-authors" class="section level3">
<h3><span class="header-section-number">1.8.3</span> Branding of authors</h3>
<p>You can make the names of (some) authors clickable by adding their URL, and you can even replace their names with a logo (think rOpenSci… or your organisation/company!). See <a href="http://pkgdown.r-lib.org/reference/build_home.html?q=authors#yaml-config-authors"><code>pkgdown</code> documentation</a> and this example in the wild: <a href="https://github.com/ropenscilabs/rodev/blob/f07fdead39762b332bc1df63e470cdc271d696e0/_pkgdown.yml#L1"><code>pkgdown</code> config file</a>, <a href="https://ropenscilabs.github.io/rodev/">resulting website</a>.</p>
</div>
</div>
<div id="authorship" class="section level2">
<h2><span class="header-section-number">1.9</span> Authorship</h2>
<p>The <code>DESCRIPTION</code> file of a package should list package authors and contributors to a package, using the <code>Authors@R</code> syntax to indicate their roles (author/creator/contributor etc.) if there is more than one author, and using the comment field to indicate the ORCID ID of each author, if they have one (cf <a href="https://ropensci.org/technotes/2018/10/08/orcid/">this post</a>). See <a href="https://cran.rstudio.com/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file">this section of “Writing R Extensions”</a> for details. If you feel that your reviewers have made a substantial contribution to the development of your package, you may list them in the <code>Authors@R</code> field with a Reviewer contributor type (<code>&quot;rev&quot;</code>), like so:</p>
<pre><code>    person(&quot;Bea&quot;, &quot;Hernández&quot;, role = &quot;rev&quot;,
    comment = &quot;Bea reviewed the package for ropensci, see &lt;https://github.com/ropensci/software-review/issues/116&gt;&quot;),</code></pre>
<p>Only include reviewers after asking for their consent. Read more in <a href="https://ropensci.org/blog/2018/03/16/thanking-reviewers-in-metadata/">this blog post “Thanking Your Reviewers: Gratitude through Semantic Metadata”</a>. Note that ‘rev’ will raise a CRAN NOTE unless the package is built using R v3.5. As of June 2018 you need to use <a href="https://github.com/klutometis/roxygen#installation"><code>roxygen2</code> dev version</a> for the list of authors in the package-level documentation to be compiled properly with the “rev” role (because this is a MARC role not included yet in <a href="https://cran.r-project.org/web/packages/roxygen2/index.html"><code>royxgen2</code> CRAN version from February 2017</a>).</p>
<p>Please do not list editors as contributors. Your participation in and contribution to rOpenSci is thanks enough!</p>
</div>
<div id="testing" class="section level2">
<h2><span class="header-section-number">1.10</span> Testing</h2>
<ul>
<li><p>All packages should pass <code>R CMD check</code>/<code>devtools::check()</code> on all major platforms.</p></li>
<li><p>All packages should have a test suite that covers major functionality of the package. The tests should also cover the behavior of the package in case of errors.</p></li>
<li><p>It is good practice to write unit tests for all functions, and all package code in general, ensuring key functionality is covered. Test coverage below 75% will likely require additional tests or explanation before being sent for review.</p></li>
<li><p>We recommend using <code>testthat</code> for writing tests. Strive to write tests as you write each new function. This serves the obvious need to have proper testing for the package, but allows you to think about various ways in which a function can fail, and to <em>defensively</em> code against those. <a href="http://r-pkgs.had.co.nz/tests.html">More information</a>.</p></li>
<li><p>Packages with shiny apps should use a unit-testing framework such as <a href="https://rstudio.github.io/shinytest/articles/shinytest.html"><code>shinytest</code></a> to test that interactive interfaces behave as expected.</p></li>
<li><p>For testing your functions creating plots, we suggest using <a href="https://cran.rstudio.com/web/packages/vdiffr/index.html"><code>vdiffr</code></a>, an extension of the <code>testthat</code> package.</p></li>
<li><p>Once you’ve set up CI, use your package’s code coverage report (cf <a href="ci.html#coverage">this section of our book</a>) to identify untested lines, and to add further tests.</p></li>
<li><p><code>testthat</code> has a function <code>skip_on_cran()</code> that you can use to not run tests on CRAN. We recommend using this on all functions that are API calls since they are quite likely to fail on CRAN. These tests will still run on Travis.</p></li>
<li><p>Even if you use <a href="ci.html#ci">continuous integration</a>, we recommend that you run tests locally prior to submitting your package, as some tests are often skipped (you may need to set <code>Sys.setenv(NOT_CRAN=&quot;true&quot;)</code> in order to ensure all tests are run). In addition, we recommend that prior to submitting your package, you use MangoTheCat’s <a href="https://github.com/MangoTheCat/goodpractice/"><strong>goodpractice</strong></a> package to check your package for likely sources of errors, and run <code>spelling::spell_check_package()</code> to find spelling errors in documentation.</p></li>
</ul>
</div>
<div id="examples" class="section level2">
<h2><span class="header-section-number">1.11</span> Examples</h2>
<ul>
<li><p>Include extensive examples in the documentation. In addition to demonstrating how to use the package, these can act as an easy way to test package functionality before there are proper tests. However, keep in mind we require tests in contributed packages.</p></li>
<li>You can run examples with <code>devtools::run_examples()</code>. Note that when you run R CMD CHECK or equivalent (e.g., <code>devtools::check()</code>) your examples that are not wrapped in <code>\dontrun{}</code> or <code>\donttest{}</code> are run.</li>
<li><p>In addition to running examples locally on your own computer, we strongly advise that you run examples on one of the CI systems, e.g. Travis-CI. Again, examples that are not wrapped in <code>\dontrun{}</code> or <code>\donttest{}</code> will be run, but for those that are you can add <code>r_check_args: &quot;--run-dontrun&quot;</code> to run examples wrapped in <code>\dontrun{}</code> in your <code>.travis.yml</code> (and/or <code>--run-donttest</code> if you want to run examples wrapped in <code>\donttest{}</code>).</p></li>
</ul>
</div>
<div id="package-dependencies" class="section level2">
<h2><span class="header-section-number">1.12</span> Package dependencies</h2>
<ul>
<li><p>Use <code>Imports</code> instead of <code>Depends</code> for packages providing functions from other packages. Make sure to list packages used for testing (<code>testthat</code>), and documentation (<code>knitr</code>, <code>roxygen2</code>) in your <code>Suggests</code> section of package dependencies. If you use any package in the examples or tests of your package, make sure to list it in <code>Suggests</code>, if not already listed in <code>Imports</code>.</p></li>
<li><p>For most cases where you must expose functions from dependencies to the user, you should import and re-export those individual functions rather than listing them in the <code>Depends</code> fields. For instance, if functions in your package produce <code>raster</code> objects, you might re-export only printing and plotting functions from the <strong>raster</strong> package.</p></li>
<li><p>If your package uses a <em>system</em> dependency, you should</p>
<ul>
<li><p>indicate it in DESCRIPTION</p></li>
<li><p>Check that it is listed by <a href="https://github.com/r-hub/sysreqsdb#sysreqs"><code>sysreqsdb</code></a> to allow automatic tools to install it, and <a href="https://github.com/r-hub/sysreqsdb#contributing">submit a contribution</a> if not.</p></li>
<li><p>check for it in a <code>configure</code> script (<a href="https://github.com/ropensci/magick/blob/c116b2b8505f491db72a139b61cd543b7a2ce873/DESCRIPTION#L19">example</a>) and give a helpful error message if it cannot be found (<a href="https://github.com/cran/webp/blob/master/configure">example</a>).
<code>configure</code> scripts can be challenging as they often require hacky solutions
to make diverse system dependencies work across systems. Use examples (<a href="(https://github.com/search?q=org%3Acran+anticonf&amp;type=Code)">more here</a>) as a starting point but note that it is common to encounter bugs and edge cases and often violate CRAN policies. Do not hesitate to <a href="https://discuss.ropensci.org/">ask for help on our forum</a>.</p></li>
</ul></li>
<li><p>Consider the trade-offs involved in relying on a package as a dependency. On one hand,
using dependencies reduces coding effort, and can build on useful functionality developed by
others, especially if the dependency performs complex tasks, is high-performance,
and/or is well vetted and tested. On the other hand, having many dependencies
places a burden on the maintainer to keep up with changes in those packages, at risk
to your package’s long-term sustainability. It also
increases installation time and size, primarily a consideration on your and others’ development cycle, and in automated build systems. “Heavy” packages - those with many dependencies themselves, and those with large amounts of compiled code - increase this cost. Here are some approaches to reducing
dependencies:</p>
<ul>
<li><p>Small, simple functions from a dependency package may be better copied into
your own package if the dependency if you are using only a few functions
in an otherwise large or heavy dependency. On the other hand, complex functions
with many edge cases (e.g. parsers) require considerable testing and vetting.</p>
<ul>
<li><p>An common example of this is in returning tidyverse-style “tibbles” from package
functions that provide data.
One can avoid the modestly heavy <strong>tibble</strong> package dependency by returning
a tibble created by modifying a data frame like so:</p>
<pre><code>class(df) &lt;- c(&quot;tbl_df&quot;, &quot;tbl&quot;, &quot;data.frame&quot;) </code></pre>
<p>(Note that this approach is <a href="https://twitter.com/krlmlr/status/1067856118385381377">not universally endorsed</a>.)</p></li>
</ul></li>
<li><p>Ensure that you are using the package where the function is defined,
rather than one where it is re-exported. For instance many functions in <strong>devtools</strong> can be found in smaller specialty packages such as <strong>sessioninfo</strong>. The <code>%&gt;%</code> function
should be imported from <strong>magrittr</strong>, where it is defined, rather than the heavier
<strong>dplyr</strong>, which re-exports it.</p></li>
<li><p>Some dependencies are preferred because they provide easier to interpret
function names and syntax than base R solutions. If this is the primary
reason for using a function in a heavy dependency, consider wrapping
the base R approach in a nicely-named internal function in your package.</p></li>
<li><p>If dependencies that overlapping functionality, see if you can rely on only one.</p></li>
<li><p>More dependency-management tips can be found <a href="https://recology.info/2018/10/limiting-dependencies/">in this post by
Scott Chamberlain</a>.</p></li>
</ul></li>
</ul>
</div>
<div id="recommended-scaffolding" class="section level2">
<h2><span class="header-section-number">1.13</span> Recommended scaffolding</h2>
<ul>
<li><p>For HTTP requests we recommend using <a href="https://github.com/jeroen/curl/">curl</a>, <a href="https://github.com/ropensci/crul/">crul</a>, or <a href="https://cran.rstudio.com/web/packages/httr/">httr</a> over <a href="https://cran.rstudio.com/web/packages/RCurl/">RCurl</a>. If you like low level clients for HTTP, <a href="https://github.com/jeroen/curl/">curl</a> is best, whereas <a href="https://github.com/ropensci/crul/">crul</a> or <a href="https://cran.rstudio.com/web/packages/httr/">httr</a> are better for higher level access. <a href="https://github.com/ropensci/crul/">crul</a> is maintained by rOpenSci. We recommend the rOpenSci maintained packages <a href="https://github.com/ropensci/webmockr/">webmockr</a> for mocking HTTP requests, and <a href="https://github.com/ropensci/vcr/">vcr</a> for caching HTTP requests in package tests.</p></li>
<li><p>For parsing JSON, use <a href="https://github.com/jeroen/jsonlite">jsonlite</a> instead of <a href="https://cran.rstudio.com/web/packages/rjson/">rjson</a> or <a href="https://cran.rstudio.com/web/packages/RJSONIO/">RJSONIO</a>.</p></li>
<li><p>For parsing, creating, and manipulating XML, we strongly recommend <a href="https://cran.rstudio.com/web/packages/xml2/">xml2</a> for most cases.</p></li>
</ul>
</div>
<div id="crangotchas" class="section level2">
<h2><span class="header-section-number">1.14</span> Miscellaneous CRAN gotchas</h2>
<p>This is a collection of CRAN gotchas that are worth avoiding at the outset.</p>
<ul>
<li>Make sure your package title is in Title Case.</li>
<li>Do not put a period on the end of your title.</li>
<li>Avoid starting the description with the package name or “This package …”.</li>
<li>Make sure you include links to websites if you wrap a web API, scrape data from a site, etc. in the <code>Description</code> field of your <code>DESCRIPTION</code> file.</li>
<li>Avoid long running tests and examples. Consider <code>testthat::skip_on_cran</code> in tests to skip things that take a long time but still test them locally and on Travis.</li>
<li>Include top-level files such as <code>paper.md</code>, <code>.travis.yml</code> in your <code>.Rbuildignore</code> file.</li>
</ul>
</div>
<div id="further-guidance" class="section level2">
<h2><span class="header-section-number">1.15</span> Further guidance</h2>
<ul>
<li><p>Hadley Wickham’s <em>R Packages</em> is an excellent, readable resource on package development which is available for <a href="http://r-pkgs.had.co.nz/">free online</a> (and <a href="http://amzn.com/1491910593?tag=r-pkgs-20">print</a>).</p></li>
<li><p><a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html">Writing R Extensions</a> is the canonical, usually most up-to-date, reference for creating R packages.</p></li>
<li><p>If you are submitting a package to rOpenSci via the <a href="https://github.com/ropensci/software-review">software-review repo</a>, you can direct further questions to the rOpenSci team in the issue tracker, or in our <a href="https://discuss.ropensci.org/">discussion forum</a>.</p></li>
<li><p>Before submitting a package use the <a href="https://github.com/MangoTheCat/goodpractice"><strong>goodpractice</strong></a> package (<code>goodpractice::gp()</code>) as a guide to improve your package, since most exceptions to it will need to be justified. E.g. the use of <code>foo</code> might be generally bad and therefore flagged by <code>goodpractice</code> but you had a good reason to use it in your package.</p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ci.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ropensci/dev_guide/edit/dev/pkg_building.Rmd",
"text": "Edit this chapter"
},
"history": {
"link": "https://github.com/ropensci/dev_guide/commits/master/pkg_building.Rmd",
"text": "Chapter edit history"
},
"download": ["ropensci-dev-guide.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
